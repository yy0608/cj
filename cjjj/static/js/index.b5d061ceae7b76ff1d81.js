webpackJsonp([3],{"/g7X":function(t,i){},"2uFj":function(t,i,e){var a="",s="";s=(a="http://120.76.188.39:8080")+"/cjjjapi",t.exports={origin:a,staticOrigin:s}},"591R":function(t,i){},BVMn:function(t,i,e){"use strict";var a={methods:{goOrder:function(){window.location.href="./activity.html"}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"order-btn",on:{click:this.goOrder}},[this._v("我要预约")])},staticRenderFns:[]};var n=e("vSla")(a,s,!1,function(t){e("/g7X")},null,null);i.a=n.exports},PBmY:function(t,i){},YhU3:function(t,i){},lVK7:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});e("miO0");var a=e("OTYB"),s=e.n(a),n=(e("PBmY"),e("I4Nl")),o=e.n(n),c=(e("591R"),e("t2au")),r=e.n(c),d=e("MVMM"),l=e("3cXf"),u=e.n(l),h=e("aA9S"),p=e.n(h),y=e("aozt"),m=e.n(y),f=e("2uFj"),g={data:function(){return{typeList:[],curType:"",cityId:"",cityName:"城市",buildingId:"",buildingName:"楼盘",typeName:"户型",curId:"",pageNo:1,pageSize:15,allLoaded:!1,yjjjCaseLikedIdArray:[],origin:f.origin,staticOrigin:f.staticOrigin,caseList:[],typeStyle:{"max-height":0}}},components:{OrderBtn:e("BVMn").a},created:function(){Date.now()>1527767265e3&&(alert("欠费过期了"),this.$toast("欠费过期了")),this.getCaseList();try{this.yjjjCaseLikedIdArray=JSON.parse(localStorage.yjjjCaseLikedIdArray)}catch(t){this.yjjjCaseLikedIdArray=[]}},watch:{typeStyle:function(t){var i=this;t["max-height"]||setTimeout(function(){i.typeList=[]},200)},caseList:function(t){for(var i=0;i<t.length;i++)this.yjjjCaseLikedIdArray.includes(this.caseList[i].id)&&this.$set(this.caseList[i],"liked",!0)}},methods:{maskTouch:function(t){this.typeStyle={"max-height":0},t.preventDefault()},getTypeList:function(t,i){var e=this;t===this.curType&&this.typeStyle["max-height"]?this.typeStyle={"max-height":0}:this.typeStyle={"max-height":"999px"},this.curType=t;var a=f.origin+"/cjjjapi/wx/",s={};switch(t){case"city":a+="findBizHouseCitys.action";break;case"area":a+="findBizHouseAreas.action",s={cityId:this.cityId};break;case"type":a+="findBizHouseTypes.action",s={buildingId:this.buildingId}}this.$indicator.open({spinnerType:"fading-circle"}),m()({url:a,method:"post",data:this.filterEmptyValue(s)}).then(function(t){if(e.$indicator.close(),t.data.code)return e.$toast(t.data.message);["城市","楼盘","户型","全部"].includes(i)?e.typeList=t.data.data:e.typeList=[{id:"",name:"全部"}].concat(t.data.data)}).catch(function(t){e.$indicator.close(),console.log(t),e.$toast("客户端请求出错")})},changeType:function(t,i){switch(this.curType){case"city":this.cityId=t,this.cityName=i;break;case"area":this.buildingId=t,this.buildingName=i;break;case"type":this.typeName=i}this.curId=t,this.typeStyle={"max-height":0},this.getCaseList(!0)},getCaseList:function(t){var i=this;this.$indicator.open({spinnerType:"fading-circle"}),t&&(this.pageNo=1,this.allLoaded=!1);var e={pageNo:this.pageNo,pageSize:this.pageSize};switch(this.curType){case"city":e=p()(e,{cityId:this.curId});break;case"area":e=p()(e,{buildingId:this.curId});break;case"type":e=p()(e,{typeId:this.curId})}m()({url:f.origin+"/cjjjapi/wx/findBizHouseBeautifys.action",method:"post",data:this.filterEmptyValue(e)}).then(function(e){if(i.$indicator.close(),i.$refs.loadmore.onBottomLoaded(),e.data.code)return i.$toast(e.data.message);e.data.page.pages===i.pageNo&&(i.allLoaded=!0),i.caseList=t?e.data.data:i.caseList.concat(e.data.data)}).catch(function(t){i.$indicator.close(),console.log(t),i.$toast("客户端请求出错")})},like:function(t,i){var e=this;if(this.caseList[i].liked)return this.$toast("已点赞");m()({url:f.origin+"/cjjjapi/wx/saveOrDelBizCollection.action",method:"post",data:{type:"save",userId:Date.now(),beautifyId:t}}).then(function(a){if(a.data.code)return e.$toast(a.data.message);e.$set(e.caseList[i],"liked",!0),e.caseList[i].favoriteCount++,e.yjjjCaseLikedIdArray.push(t),localStorage.yjjjCaseLikedIdArray=u()(e.yjjjCaseLikedIdArray)}).catch(function(t){e.$indicator.close(),console.log(t),e.$toast("客户端请求出错")})},goDetail:function(t){window.location.href="./detail.html?id="+t},goTeam:function(){window.location.href="./team.html"},loadBottom:function(){this.loadmore||(this.pageNo++,this.getCaseList())},filterEmptyValue:function(t){for(var i in t)!t.hasOwnProperty(i)||null!==t[i]&&void 0!==t[i]&&""!==t[i]||delete t[i];return t}}},v={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"page-item"},[e("header",[e("div",{staticClass:"nav-item"},[e("div",{staticClass:"inner",on:{click:function(i){t.getTypeList("city",t.cityName)}}},[t._v(t._s("全部"===t.cityName?"城市":t.cityName))])]),t._v(" "),e("div",{staticClass:"nav-item"},[e("div",{staticClass:"inner",on:{click:function(i){t.getTypeList("area",t.buildingName)}}},[t._v(t._s("全部"===t.buildingName?"楼盘":t.buildingName))])]),t._v(" "),e("div",{staticClass:"nav-item"},[e("div",{staticClass:"inner",on:{click:function(i){t.getTypeList("type",t.typeName)}}},[t._v(t._s("全部"===t.typeName?"户型":t.typeName))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.typeList.length,expression:"this.typeList.length"}],staticClass:"type-list-cont",style:t.typeStyle},t._l(t.typeList,function(i){return e("div",{key:i.id,staticClass:"type-list-item",on:{click:function(e){t.changeType(i.id,i.name)}}},[t._v(t._s(i.name))])}))]),t._v(" "),e("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded}},[t.caseList.length?e("div",{staticClass:"list-cont"},t._l(t.caseList,function(i,a){return e("div",{key:i.id,staticClass:"list-item",on:{click:function(e){t.goDetail(i.id)}}},[e("div",{staticClass:"img-cont"},[e("img",{attrs:{src:t.staticOrigin+i.mainPicPath}})]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(i.cityName)+"/"+t._s(i.areaName)+"/精装")]),t._v(" "),e("div",{staticClass:"info-cont"},[e("div",{staticClass:"desc"},[t._v(t._s(i.typeName)+"/"+t._s(i.styleInfo))]),t._v(" "),e("div",{staticClass:"tags"},[e("div",{staticClass:"views"},[t._v(t._s(i.readCount))]),t._v(" "),e("div",{class:[i.liked?"liked":"like",""],on:{click:function(e){e.stopPropagation(),t.like(i.id,a)}}},[t._v(t._s(i.favoriteCount))])])]),t._v(" "),e("div",{staticClass:"designer",on:{click:function(i){return i.stopPropagation(),t.goTeam(i)}}},[t._v("设计 | "+t._s(i.designer))])])})):e("div",{staticClass:"no-data"},[t._v("暂无数据")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.typeStyle["max-height"],expression:"typeStyle['max-height']"}],staticClass:"mask-cont",on:{touchstart:function(i){t.maskTouch(i)}}}),t._v(" "),e("order-btn")],1)},staticRenderFns:[]};var _=e("vSla")(g,v,!1,function(t){e("x8n8")},null,null).exports;d.default.component(r.a.name,r.a),d.default.prototype.$toast=o.a,d.default.prototype.$indicator=s.a,d.default.config.productionTip=!1,new d.default({el:"#app",components:{App:_},template:"<App/>"})},miO0:function(t,i){},x8n8:function(t,i){}},["lVK7"]);